package shadows.apotheosis.ench.enchantments;

import java.util.List;
import java.util.stream.Collectors;

import net.minecraft.enchantment.Enchantment;
import net.minecraft.enchantment.EnchantmentHelper;
import net.minecraft.entity.passive.SheepEntity;
import net.minecraft.inventory.EquipmentSlotType;
import net.minecraft.item.ItemStack;
import net.minecraft.util.DamageSource;
import net.minecraft.util.text.IFormattableTextComponent;
import net.minecraft.util.text.ITextComponent;
import net.minecraft.util.text.TextFormatting;
import shadows.apotheosis.ench.EnchModule;

public class ExploitationEnchant extends Enchantment {

	public ExploitationEnchant() {
		super(Rarity.VERY_RARE, EnchModule.SHEARS, new EquipmentSlotType[] { EquipmentSlotType.MAINHAND, EquipmentSlotType.OFFHAND });
	}

	@Override
	public int getMinCost(int pLevel) {
		return 50;
	}

	@Override
	public ITextComponent getFullname(int level) {
		return ((IFormattableTextComponent) super.getFullname(level)).withStyle(TextFormatting.DARK_PURPLE);
	}

	public List<ItemStack> molestSheepItems(SheepEntity sheep, ItemStack shears, List<ItemStack> items) {
		if (EnchantmentHelper.getItemEnchantmentLevel(this, shears) > 0) {
			if (items.size() > 0) {
				items.addAll(items.stream().map(ItemStack::copy).collect(Collectors.toList()));
				sheep.hurt(DamageSource.GENERIC, 2);
			}
		}
		return items;
	}

}
